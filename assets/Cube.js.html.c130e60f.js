import{_ as e,o as p,c as t,b as n,d as r,F as o,e as s,a as l,r as c}from"./app.d740ecc1.js";const i={},u=n("h1",{id:"cube-js",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#cube-js","aria-hidden":"true"},"#"),s(" Cube.js")],-1),k={href:"https://cube.dev/docs/",target:"_blank",rel:"noopener noreferrer"},b=s("https://cube.dev/docs/"),m=l(`<p>\u6839\u636Eschema\u52A8\u6001\u751F\u6210SQL\u4EE5\u53CA\u5BF9\u5E94\u7684\u56FE\u8868\u7EDF\u8BA1\u4FE1\u606F</p><h2 id="\u591A\u6570\u636E\u6E90" tabindex="-1"><a class="header-anchor" href="#\u591A\u6570\u636E\u6E90" aria-hidden="true">#</a> \u591A\u6570\u636E\u6E90</h2><p>\u652F\u6301\u5F00\u7BB1\u5373\u7528</p><p>\u8FDE\u63A5Dremio\u63D0\u4F9B\u7684\u6570\u636E\u6E56\u529F\u80FD\u5B9E\u73B0\u591A\u6570\u636E\u6E90.</p><h2 id="\u591A\u79DF\u6237" tabindex="-1"><a class="header-anchor" href="#\u591A\u79DF\u6237" aria-hidden="true">#</a> \u591A\u79DF\u6237</h2><p>\u4E0D\u540C\u7684\u7528\u6237\u62E5\u6709\u4E0D\u540C\u7684\u6570\u636E,\u6BD4\u5982\u6BCF\u4E2A\u7528\u6237\u90FD\u62E5\u6709\u67D0\u4E2A\u5E93\u4E0B\u81EA\u5DF1\u7684schema</p><h1 id="cube-js-demo" tabindex="-1"><a class="header-anchor" href="#cube-js-demo" aria-hidden="true">#</a> Cube.js Demo</h1><p>node\u73AF\u5883</p><blockquote><p>$ npx cubejs-cli create hello-world -d mysql</p></blockquote><p>\u4FEE\u6539.env\u6587\u4EF6</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">CUBEJS_DB_HOST</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">CUBEJS_DB_NAME</span><span class="token punctuation">=</span><span class="token value attr-value">zong</span>
<span class="token key attr-name">CUBEJS_DB_USER</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">CUBEJS_DB_PASS</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span>
<span class="token key attr-name">CUBEJS_WEB_SOCKETS</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">CUBEJS_DEV_MODE</span><span class="token punctuation">=</span><span class="token value attr-value">true#\u5F00\u53D1\u8005\u6A21\u5F0F\u53EF\u4EE5\u505C\u7528\u5B89\u5168\u8BA4\u8BC1\u548C\u7F13\u5B58</span>
<span class="token key attr-name">CUBEJS_DB_TYPE</span><span class="token punctuation">=</span><span class="token value attr-value">mysql</span>
<span class="token key attr-name">CUBEJS_API_SECRET</span><span class="token punctuation">=</span><span class="token value attr-value">7231de6ada597c0aa66bbac5dcee0f2c75e3ccde30395c5001efbb8b0f2ceed41b242bdc0024fc56cb30861fe8ffdd45373387f667ec2a084e24341001f4bca9</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u542F\u52A8</p><blockquote><p>npm run dev</p></blockquote><h1 id="cube-schema" tabindex="-1"><a class="header-anchor" href="#cube-schema" aria-hidden="true">#</a> Cube Schema</h1><h2 id="_1-cube" tabindex="-1"><a class="header-anchor" href="#_1-cube" aria-hidden="true">#</a> 1. cube</h2><p>\u5BF9\u67D0\u4E2A\u8868/\u5B9E\u4F53\u8FDB\u884C\u7BA1\u7406</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">cube</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">User</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">sql</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">SELECT * FROM zong.user</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">measures</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">dimensions</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//\u7EF4\u5EA6</span>
  <span class="token literal-property property">segments</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">preAggregations</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//\u9884\u805A\u96C6</span>
  <span class="token literal-property property">dataSource</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//\u6570\u636E\u6E90</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_2-measures" tabindex="-1"><a class="header-anchor" href="#_2-measures" aria-hidden="true">#</a> 2. measures</h2><p>\u67D0\u79CD\u805A\u5408\u64CD\u4F5C,\u6BD4\u5982count/max</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token literal-property property">measures</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">count</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">drillMembers</span><span class="token operator">:</span> <span class="token punctuation">[</span>id<span class="token punctuation">,</span> name<span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">doubleCount</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">number</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">sql</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> * 2</span><span class="token template-punctuation string">\`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">max</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">number</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">sql</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">max(id)</span><span class="token template-punctuation string">\`</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="measures-types" tabindex="-1"><a class="header-anchor" href="#measures-types" aria-hidden="true">#</a> Measures Types</h3><p>number/count/countDistinct/countDistinctApprox/sum/avg/mix/max/runningTotal</p><h3 id="measures-formats" tabindex="-1"><a class="header-anchor" href="#measures-formats" aria-hidden="true">#</a> Measures Formats</h3><p>percent/curreny(\u8D27\u5E01)/</p><h2 id="_3-dimensions" tabindex="-1"><a class="header-anchor" href="#_3-dimensions" aria-hidden="true">#</a> 3. dimensions</h2><p>\u6570\u636E\u5217</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">dimensions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">sql</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">id</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">number</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">primaryKey</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    <span class="token literal-property property">createTime</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">sql</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">create_time</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">time</span><span class="token template-punctuation string">\`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    <span class="token literal-property property">updateTime</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">sql</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">update_time</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">time</span><span class="token template-punctuation string">\`</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="dimensions-types" tabindex="-1"><a class="header-anchor" href="#dimensions-types" aria-hidden="true">#</a> Dimensions Types</h3><p>time/string/number/boolean/geo(\u7ECF\u7EAC\u5EA6)</p><h3 id="dimensions-formats" tabindex="-1"><a class="header-anchor" href="#dimensions-formats" aria-hidden="true">#</a> Dimensions Formats</h3><p>imageUrl/id/link/currencypercent</p><h2 id="_4-joins" tabindex="-1"><a class="header-anchor" href="#_4-joins" aria-hidden="true">#</a> 4. joins</h2><p>\u8FDE\u63A5, \xA0relationship: <code>belongsTo</code> || <code>hasMany</code> || <code>hasOne</code></p><blockquote><p><code>user</code> ---- <code>hasMany</code>----&gt; <code>role</code></p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token literal-property property">User</span><span class="token operator">:</span>
  <span class="token literal-property property">joins</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">Role</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">relationship</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">hasMany</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">sql</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>User<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.id = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>Role<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.uid</span><span class="token template-punctuation string">\`</span></span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u5728playground\u4E2D\u4F7F\u7528,\u6BD4\u5982\u52FE\u9009</p><blockquote><p>MEASURES :User Count DIMENSIONS: Role Name</p></blockquote><p>\u751F\u6210\u7684SQL:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
  <span class="token identifier"><span class="token punctuation">\`</span> role <span class="token punctuation">\`</span></span><span class="token punctuation">.</span>name <span class="token identifier"><span class="token punctuation">\`</span> role__name <span class="token punctuation">\`</span></span><span class="token punctuation">,</span>
  <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> <span class="token identifier"><span class="token punctuation">\`</span> user <span class="token punctuation">\`</span></span><span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token identifier"><span class="token punctuation">\`</span> user__count <span class="token punctuation">\`</span></span>
<span class="token keyword">FROM</span>
  zong<span class="token punctuation">.</span><span class="token keyword">user</span> <span class="token keyword">AS</span> <span class="token identifier"><span class="token punctuation">\`</span> user <span class="token punctuation">\`</span></span>
  <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> zong<span class="token punctuation">.</span>role <span class="token keyword">AS</span> <span class="token identifier"><span class="token punctuation">\`</span> role <span class="token punctuation">\`</span></span> <span class="token keyword">ON</span> <span class="token identifier"><span class="token punctuation">\`</span> user <span class="token punctuation">\`</span></span><span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token identifier"><span class="token punctuation">\`</span> role <span class="token punctuation">\`</span></span><span class="token punctuation">.</span>uid
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
  <span class="token number">1</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
  <span class="token number">2</span> <span class="token keyword">DESC</span>
<span class="token keyword">LIMIT</span>
  <span class="token number">10000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_5-segments" tabindex="-1"><a class="header-anchor" href="#_5-segments" aria-hidden="true">#</a> 5. segments</h2><p>\u5B83\u662F\u9884\u5B9A\u4E49\u7684\u8FC7\u6EE4\u5668,\u529F\u80FD\u548CFilter\u7C7B\u4F3C,\u5728\u751F\u6210\u7684SQL\u4E2D\u53EF\u89C1 where\u8BED\u53E5 \u6DFB\u52A0\u7684\u6761\u4EF6</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token literal-property property">segments</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">sfUsers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">sql</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">CUBE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.id = &#39;2&#39;</span><span class="token template-punctuation string">\`</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Filter\u5728\u9875\u9762\u4E2D\u52FE\u9009\u5BF9\u5E94\u7684DIMENSIONS\u6216MEASURES\u8BBE\u7F6E \u6BD4\u8F83,\u5176\u7ED3\u679C\u53EF\u4EE5\u4E0Esegments\u5B9E\u73B0\u540C\u6837\u7684\u7ED3\u679C.</p><p>\u7531\u4E8Esegments\u662F\u9884\u5B9A\u4E49\u7684\u8FC7\u6EE4\u5668,\u9002\u5408\u7528\u5728\u590D\u6742\u67E5\u8BE2\u4E2D,\u4E3A\u6240\u6709\u7528\u6237\u9884\u7F6E\u590D\u6742\u7684\u67E5\u8BE2\u6761\u4EF6</p><h2 id="_6-preaggregations" tabindex="-1"><a class="header-anchor" href="#_6-preaggregations" aria-hidden="true">#</a> 6. preAggregations</h2><p>\u9884\u805A\u96C6:</p><p>\u8981\u6C42cube\u62E5\u6709\u5BF9\u6570\u636E\u6E90\u7684\u5199\u5165\u6743\u9650,Cube.js\u9996\u5148\u5728\u6E90\u6570\u636E\u5E93\u4E2D\u5C06\u9884\u805A\u5408\u6784\u5EFA\u4E3A\u8868\uFF0C\u7136\u540E\u5C06\u5176\u5BFC\u51FA\u5230\u9884\u805A\u5408\u5B58\u50A8\u4E2D.</p><p>\u6BD4\u5982</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token literal-property property">preAggregations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">sqlAlias</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">original</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">originalSql</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u6784\u5EFA\u6210\u529F\u540E,\u53EF\u89C1\u6570\u636E\u5E93\u591A\u4E86\u4E00\u4E2A\u5E93dev_pre_aggregations,\u91CC\u9762\u6709cube\u751F\u6210\u7684\u8868,\u901A\u8FC7\u9884\u805A\u96C6\u7684\u7279\u70B9,\u5B9E\u73B0\u5FEB\u901F\u67E5\u8BE2\u7684\u76EE\u7684.</p><p>\u4F7F\u7528\u5916\u90E8\u9884\u805A\u5408\u9700\u8981\u5B89\u88C5driver:</p><p>yarn add @cubejs-backend/cubestore-driver --dev</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>


\`\`\`javascript
  preAggregations: {
    categoryAndDate: {
      type: \`rollup\`,
      external: true,
      measureReferences: [Orders.count, revenue],
      dimensionReferences: [category],
      timeDimensionReference: createdAt,
      granularity: \`day\`,
    },
  },
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_7-contexts" tabindex="-1"><a class="header-anchor" href="#_7-contexts" aria-hidden="true">#</a> 7. contexts</h2><p>cube\u96C6\u5408</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>context(\`Sales\`, {
  contextMembers: [Users, Deals, Meetings]
});
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_8-execution-environment" tabindex="-1"><a class="header-anchor" href="#_8-execution-environment" aria-hidden="true">#</a> 8. Execution Environment</h2><ul><li></li></ul><p>\${CUBE} \u53EF\u4F5C\u4E3A\u5F53\u524Dcube\u7684\u6307\u5411,\u7C7B\u4F3Cthis</p><ul><li></li></ul><p>ratio \u53EF\u4F5C\u4E3A\u6570\u636E\u96C6\u7684\u5916\u90E8\u5B9A\u4E49</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>const measureRatioDefinition = {
  sql: (CUBE, count) =&gt; \`sum(\${CUBE}.amount) / \${count}\`,
  type: \`number\`,
};

cube(\`Users\`, {
  // ...

  measures: {
    count: {
      type: \`count\`,
    },

    ratio: measureRatioDefinition,
  },
});
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div>`,62);function d(g,h){const a=c("ExternalLinkIcon");return p(),t(o,null,[u,n("blockquote",null,[n("p",null,[n("a",k,[b,r(a)])])]),m],64)}var v=e(i,[["render",d],["__file","Cube.js.html.vue"]]);export{v as default};
