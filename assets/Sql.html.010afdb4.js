import{_ as n,a as s}from"./app.6a98a4dc.js";const a={},p=s(`<h1 id="\u5E38\u7528\u5185\u7F6E\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u5E38\u7528\u5185\u7F6E\u51FD\u6570" aria-hidden="true">#</a> \u5E38\u7528\u5185\u7F6E\u51FD\u6570</h1><h2 id="oracle" tabindex="-1"><a class="header-anchor" href="#oracle" aria-hidden="true">#</a> Oracle</h2><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- greatest :\u4E24\u5217\u4E2D\u53D6\u66F4\u665A\u7684\u65F6\u95F4</span>
<span class="token keyword">select</span> greatest<span class="token punctuation">(</span>time1<span class="token punctuation">,</span>time2<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">time</span> <span class="token keyword">from</span> Test<span class="token punctuation">;</span> 

<span class="token comment">-- concat :\u5B57\u7B26\u4E32\u62FC\u63A5,\u53EA\u652F\u6301\u4E24\u4E2A\u53C2\u6570,Mysql\u4E3A\u4E09\u4E2A</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> Test <span class="token keyword">where</span> name <span class="token operator">like</span> concat<span class="token punctuation">(</span><span class="token string">&#39;%&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;3&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--\u53EF\u7528 || \u4EE3\u66FF</span>

<span class="token comment">-- replace :\u5B57\u7B26\u4E32\u66FF\u6362,\u4E09\u4E2A\u53C2\u6570</span>
<span class="token keyword">select</span> <span class="token keyword">replace</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;2&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> Test<span class="token punctuation">;</span><span class="token comment">--id\u4E2D\u76841\u66FF\u6362\u4E3A2</span>

<span class="token comment">-- ifnull :\u82E5\u4E3A\u7A7A,\u66FF\u6362\u4E3A</span>
<span class="token keyword">select</span> ifnull<span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token string">&#39;unknown&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> Test<span class="token punctuation">;</span><span class="token comment">--id\u4E2D\u7684null\u66FF\u6362\u4E3Aunknown</span>

<span class="token comment">-- instr :\u6839\u636Ein\u6392\u5E8F</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Test  <span class="token keyword">where</span> id <span class="token operator">in</span>  <span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;2&#39;</span><span class="token punctuation">)</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> instr<span class="token punctuation">(</span><span class="token string">&#39;1,2&#39;</span><span class="token punctuation">,</span>id <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- start with * onnect by * :\u6811\u7ED3\u6784\u904D\u5386</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> TestA <span class="token keyword">start</span> <span class="token keyword">with</span> id<span class="token operator">=</span><span class="token string">&#39;1&#39;</span> <span class="token keyword">connect</span> <span class="token keyword">by</span> pid <span class="token operator">=</span> prior id <span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="sqlserver" tabindex="-1"><a class="header-anchor" href="#sqlserver" aria-hidden="true">#</a> SqlServer</h2><h3 id="\u5143\u6570\u636E\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#\u5143\u6570\u636E\u4FE1\u606F" aria-hidden="true">#</a> \u5143\u6570\u636E\u4FE1\u606F</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> t<span class="token punctuation">.</span>name column_name<span class="token punctuation">,</span>COLUMNPROPERTY<span class="token punctuation">(</span> t<span class="token punctuation">.</span>id<span class="token punctuation">,</span> t<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&#39;PRECISION&#39;</span> <span class="token punctuation">)</span>  data_length<span class="token punctuation">,</span>
 isnull<span class="token punctuation">(</span> COLUMNPROPERTY<span class="token punctuation">(</span> t<span class="token punctuation">.</span>id<span class="token punctuation">,</span> t<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&#39;Scale&#39;</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span> numeric_scale<span class="token punctuation">,</span> b<span class="token punctuation">.</span>name data_type<span class="token punctuation">,</span>
pk <span class="token operator">=</span> <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token number">1</span> <span class="token keyword">FROM</span> sysobjects <span class="token keyword">WHERE</span> xtype <span class="token operator">=</span> <span class="token string">&#39;PK&#39;</span> <span class="token operator">AND</span> parent_obj <span class="token operator">=</span> t<span class="token punctuation">.</span>id
<span class="token operator">AND</span> name <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> sysindexes
<span class="token keyword">WHERE</span> indid <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> indid <span class="token keyword">FROM</span> sysindexkeys <span class="token keyword">WHERE</span> id <span class="token operator">=</span> t<span class="token punctuation">.</span>id <span class="token operator">AND</span> colid <span class="token operator">=</span> t<span class="token punctuation">.</span>colid <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token keyword">THEN</span><span class="token string">&#39;1&#39;</span> <span class="token keyword">ELSE</span> <span class="token string">&#39;0&#39;</span> <span class="token keyword">END</span><span class="token punctuation">,</span>
t<span class="token punctuation">.</span>isnullable nullable<span class="token punctuation">,</span><span class="token keyword">CONVERT</span><span class="token punctuation">(</span>nvarchar<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ISNULL<span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token keyword">value</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token keyword">as</span> comments <span class="token keyword">from</span> syscolumns t 
<span class="token keyword">inner</span> <span class="token keyword">join</span> sys<span class="token punctuation">.</span>objects f <span class="token keyword">on</span> t<span class="token punctuation">.</span>id <span class="token operator">=</span> f<span class="token punctuation">.</span>object_id 
<span class="token keyword">left</span> <span class="token keyword">join</span> sys<span class="token punctuation">.</span>schemas s <span class="token keyword">on</span> s<span class="token punctuation">.</span>schema_id <span class="token operator">=</span> f<span class="token punctuation">.</span>schema_id 
<span class="token keyword">left</span> <span class="token keyword">join</span> systypes b <span class="token keyword">on</span> t<span class="token punctuation">.</span>xusertype<span class="token operator">=</span>b<span class="token punctuation">.</span>xusertype 
<span class="token keyword">left</span> <span class="token keyword">join</span> sys<span class="token punctuation">.</span>extended_properties g <span class="token keyword">on</span>  g<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;MS_Description&#39;</span> <span class="token operator">and</span> t<span class="token punctuation">.</span>id<span class="token operator">=</span>g<span class="token punctuation">.</span>major_id <span class="token operator">and</span> t<span class="token punctuation">.</span>colid<span class="token operator">=</span>g<span class="token punctuation">.</span>minor_id 
<span class="token keyword">where</span> s<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;dbo&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql" aria-hidden="true">#</a> MySQL</h2><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- Mysql\u7248\u5C42\u7EA7\u67E5\u8BE2(\u6839\u636Eid\u67E5\u6240\u6709\u5B50\u8282\u70B9\u7684\u4FE1\u606F)(id,pid)</span>
<span class="token keyword">create</span>  <span class="token keyword">function</span> getChildren<span class="token punctuation">(</span>val <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">returns</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
	<span class="token keyword">declare</span> oTemp <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">declare</span> oTempChild <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> oTemp <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> oTempChild <span class="token operator">=</span> val<span class="token punctuation">;</span>
<span class="token keyword">while</span> oTempChild <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span> 
<span class="token keyword">do</span>
	<span class="token keyword">set</span> oTemp <span class="token operator">=</span> concat<span class="token punctuation">(</span>oTemp<span class="token punctuation">,</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">,</span>otempchild<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">select</span> group_concat<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">into</span> oTempChild <span class="token keyword">from</span> TestA <span class="token keyword">where</span> 		  find_in_set<span class="token punctuation">(</span>pid<span class="token punctuation">,</span>oTempChild<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">end</span> <span class="token keyword">while</span> <span class="token punctuation">;</span>
<span class="token keyword">return</span> oTemp<span class="token punctuation">;</span>
<span class="token keyword">END</span><span class="token punctuation">;</span>
<span class="token comment">-- </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> TestA <span class="token keyword">where</span> find_in_set<span class="token punctuation">(</span>xlh<span class="token punctuation">,</span>getChildren<span class="token punctuation">(</span><span class="token string">&#39;4&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="\u6027\u80FD" tabindex="-1"><a class="header-anchor" href="#\u6027\u80FD" aria-hidden="true">#</a> \u6027\u80FD</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">--</span> \u9501\u65F6\u95F4<span class="token constant">TOP10</span>
<span class="token class-name">SELECT</span> <span class="token constant">DIGEST_TEXT</span><span class="token punctuation">,</span> <span class="token constant">SUM_LOCK_TIME</span> <span class="token constant">FROM</span> 
performance_schema<span class="token punctuation">.</span>events_statements_summary_by_digest <span class="token constant">ORDER</span> <span class="token constant">BY</span> <span class="token constant">SUM_LOCK_TIME</span> <span class="token constant">DESC</span> <span class="token constant">LIMIT</span> <span class="token number">10</span>
<span class="token operator">--</span> \u5E73\u5747\u54CD\u5E94\u65F6\u95F4<span class="token constant">TOP10</span>
<span class="token class-name">SELECT</span> <span class="token constant">DIGEST_TEXT</span><span class="token punctuation">,</span><span class="token constant">AVG_TIMER_WAIT</span> <span class="token constant">FROM</span> 
performance_schema<span class="token punctuation">.</span>events_statements_summary_by_digest <span class="token constant">ORDER</span> <span class="token constant">BY</span> <span class="token constant">AVG_TIMER_WAIT</span> <span class="token constant">DESC</span> <span class="token class-name">LIMIT</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token operator">--</span> \u6392\u5E8F\u8BB0\u5F55\u6570<span class="token constant">TOP10</span>
<span class="token class-name">SELECT</span> <span class="token constant">DIGEST_TEXT</span><span class="token punctuation">,</span><span class="token constant">SUM_SORT_ROWS</span> <span class="token constant">FROM</span> 
performance_schema<span class="token punctuation">.</span>events_statements_summary_by_digest <span class="token constant">ORDER</span> <span class="token constant">BY</span> <span class="token constant">SUM_SORT_ROWS</span> <span class="token constant">DESC</span> <span class="token class-name">LIMIT</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token operator">--</span> \u626B\u63CF\u8BB0\u5F55\u6570<span class="token constant">TOP10</span>
<span class="token class-name">SELECT</span> <span class="token constant">DIGEST_TEXT</span><span class="token punctuation">,</span><span class="token constant">SUM_ROWS_EXAMINED</span> <span class="token constant">FROM</span> 
performance_schema<span class="token punctuation">.</span>events_statements_summary_by_digest <span class="token constant">ORDER</span> <span class="token constant">BY</span> <span class="token constant">SUM_ROWS_EXAMINED</span> <span class="token constant">DESC</span> 
<span class="token class-name">LIMIT</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token operator">--</span> \u521B\u5EFA\u4E34\u65F6\u8868<span class="token constant">TOP10</span>
<span class="token class-name">SELECT</span> <span class="token constant">DIGEST_TEXT</span><span class="token punctuation">,</span><span class="token constant">SUM_CREATED_TMP_TABLES</span><span class="token punctuation">,</span><span class="token constant">SUM_CREATED_TMP_DISK_TABLES</span> <span class="token constant">FROM</span> 
performance_schema<span class="token punctuation">.</span>events_statements_summary_by_digest <span class="token constant">ORDER</span> <span class="token constant">BY</span> <span class="token constant">SUM_CREATED_TMP_TABLES</span> <span class="token constant">DESC</span> 
<span class="token constant">LIMIT</span> <span class="token number">10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="\u67E5\u770B\u6267\u884C\u8BB0\u5F55" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B\u6267\u884C\u8BB0\u5F55" aria-hidden="true">#</a> \u67E5\u770B\u6267\u884C\u8BB0\u5F55</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>   set <span class="token class-name">GLOBAL</span>  general_log <span class="token operator">=</span> <span class="token char">&#39;ON&#39;</span>

<span class="token constant">SELECT</span> <span class="token operator">*</span> from mysql<span class="token punctuation">.</span>general_log <span class="token constant">ORDER</span> <span class="token constant">BY</span> event_time <span class="token constant">DESC</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="kill" tabindex="-1"><a class="header-anchor" href="#kill" aria-hidden="true">#</a> kill</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> information_schema<span class="token punctuation">.</span><span class="token constant">PROCESSLIST</span> where <span class="token function">length</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span> <span class="token operator">&gt;</span><span class="token number">0</span> <span class="token punctuation">;</span>

kill <span class="token number">742862</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="\u8FDE\u63A5\u67E5\u8BE2\u548C\u5B50\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u8FDE\u63A5\u67E5\u8BE2\u548C\u5B50\u67E5\u8BE2" aria-hidden="true">#</a> \u8FDE\u63A5\u67E5\u8BE2\u548C\u5B50\u67E5\u8BE2</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- \u5B50\u67E5\u8BE2(\u53EF\u4EE5\u7528\u4E8Eecharts\u7684\u67F1\u72B6\u56FE\u7EDF\u8BA1\u4E2D),\u8FD9\u6837\u7684\u67E5\u8BE2\u6548\u7387\u66F4\u4F4E,\u6700\u597D\u4F7F\u7528join</span>
<span class="token keyword">select</span> a<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token keyword">select</span> b<span class="token punctuation">.</span>b <span class="token keyword">from</span> TestB b <span class="token keyword">where</span> b<span class="token punctuation">.</span>id <span class="token operator">=</span> a<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
<span class="token keyword">from</span> TestA a

<span class="token comment">-- left join + group by</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span>ID<span class="token punctuation">)</span> <span class="token keyword">AS</span> NUM <span class="token punctuation">,</span>B<span class="token punctuation">.</span>NAME <span class="token keyword">AS</span> NAME <span class="token keyword">from</span>  A
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> B <span class="token keyword">ON</span> A<span class="token punctuation">.</span>ID <span class="token operator">=</span> B<span class="token punctuation">.</span>ID
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> B<span class="token punctuation">.</span>NAME
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="\u907F\u514D\u4F7F\u7528not-in-\u548C-in" tabindex="-1"><a class="header-anchor" href="#\u907F\u514D\u4F7F\u7528not-in-\u548C-in" aria-hidden="true">#</a> \u907F\u514D\u4F7F\u7528Not IN \u548C IN</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- A\u662FB\u7684\u5B50\u8868,\u67E5\u51FA\u6240\u6709\u65E0\u6548\u7684\u5B50\u8868\u6570\u636E</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span>  A <span class="token keyword">WHERE</span> A<span class="token punctuation">.</span>TID <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> ID <span class="token keyword">FROM</span> B<span class="token punctuation">)</span> <span class="token comment">-- in\u662F\u4E00\u79CD\u76F8\u5173\u5B50\u67E5\u8BE2,\u5B50\u67E5\u8BE2\u4F1A\u88AB\u5FAA\u73AF\u6267\u884C</span>
<span class="token comment">-- \u4F7F\u7528 NOT EXISTS \u66FF\u4EE3</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> A <span class="token keyword">WHERE</span>  <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> B<span class="token punctuation">.</span>ID <span class="token keyword">FROM</span>  B <span class="token keyword">WHERE</span> A<span class="token punctuation">.</span>TID <span class="token operator">=</span>B<span class="token punctuation">.</span>ID <span class="token punctuation">)</span><span class="token comment">-- exists\u662F\u975E\u76F8\u5173\u5B50\u67E5\u8BE2,\u5B50\u67E5\u8BE2\u5148\u6267\u884C\u4E14\u53EA\u6267\u884C\u4E00\u6B21</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="\u5206\u7EC4\u540E\u6309\u67D0\u4E2A\u5B57\u6BB5\u53D6\u51FA\u5176\u4E2D\u4E00\u884C\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#\u5206\u7EC4\u540E\u6309\u67D0\u4E2A\u5B57\u6BB5\u53D6\u51FA\u5176\u4E2D\u4E00\u884C\u6570\u636E" aria-hidden="true">#</a> \u5206\u7EC4\u540E\u6309\u67D0\u4E2A\u5B57\u6BB5\u53D6\u51FA\u5176\u4E2D\u4E00\u884C\u6570\u636E</h3><h4 id="oracle-1" tabindex="-1"><a class="header-anchor" href="#oracle-1" aria-hidden="true">#</a> Oracle</h4><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span>
 	<span class="token keyword">SELECT</span> <span class="token keyword">TYPE</span><span class="token punctuation">,</span>CREATE_TIME<span class="token punctuation">,</span>ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span> <span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> <span class="token keyword">TYPE</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> CREATE_TIME <span class="token keyword">DESC</span><span class="token punctuation">)</span> rn
 	<span class="token keyword">FROM</span> TABLE1 <span class="token punctuation">)</span> t <span class="token keyword">WHERE</span> t<span class="token punctuation">.</span>rn <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">-- \u6839\u636Etype\u5206\u7EC4\u7136\u540E\u53D6\u51FA\u6BCF\u7EC4create_time\u6700\u665A\u7684\u90A3\u6761\u6570\u636E</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="mysql-1" tabindex="-1"><a class="header-anchor" href="#mysql-1" aria-hidden="true">#</a> MySQL</h4><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code>  <span class="token keyword">SELECT</span> A<span class="token punctuation">.</span>CREATE_TIME<span class="token punctuation">,</span>A<span class="token punctuation">.</span><span class="token keyword">TYPE</span> <span class="token keyword">from</span>
  <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> TABLE1 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> CREATE_TIME <span class="token keyword">DESC</span> <span class="token keyword">limit</span> <span class="token number">10000</span> <span class="token punctuation">)</span> A <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> A<span class="token punctuation">.</span><span class="token keyword">TYPE</span>
  <span class="token comment">-- \u6839\u636Etype\u5206\u7EC4\u7136\u540E\u53D6\u51FA\u6BCF\u7EC4create_time\u6700\u665A\u7684\u90A3\u6761\u6570\u636E</span>
  <span class="token comment">-- \u4E3A\u4EC0\u4E48\u8981\u52A0limit:Mysql\u57285.5.28\u4EE5\u4E0A\u5B50\u67E5\u8BE2\u4E2D\u4F7F\u7528order by\u5176\u7ED3\u679C\u4E0D\u4F1A\u663E\u793A\u6392\u5E8F\u540E\u7684\u7ED3\u679C,\u800C\u662F\u88AB\u81EA\u52A8\u4F18\u5316\u6392\u5E8F,\u6240\u4EE5\u9700\u8981\u52A0limit,\u4F46\u662Flimit\u7684\u4E0A\u9650\u4E3A10000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h1 id="\u4E00\u4E2A\u5BA1\u6279\u6D41\u7A0B\u95EE\u9898\u8BB0\u5F55" tabindex="-1"><a class="header-anchor" href="#\u4E00\u4E2A\u5BA1\u6279\u6D41\u7A0B\u95EE\u9898\u8BB0\u5F55" aria-hidden="true">#</a> \u4E00\u4E2A\u5BA1\u6279\u6D41\u7A0B\u95EE\u9898\u8BB0\u5F55</h1><h2 id="\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u95EE\u9898" aria-hidden="true">#</a> \u95EE\u9898</h2><p>\u73B0\u6709\u4EFB\u52A1\u8868\u548C\u4EFB\u52A1\u8BE6\u60C5\u8868,\u7528\u6765\u4FDD\u5B58\u5BA1\u6279\u6D41\u7A0B \u5176\u6570\u636E\u7ED3\u6784\u7B80\u5199\u5982\u4E0B: TASK { id,desc} TASK_DETAIL { id,tid,name,seq,state } \u540E\u8005\u7684seq\u662F\u5BA1\u6279\u987A\u5E8F,\u4ECE1\u5F00\u59CB,tid\u5173\u8054task.id,state\u4FDD\u5B58\u5BA1\u6279\u72B6\u6001:1 \u5DF2\u5BA1\u6279,0\u672A\u5BA1\u6279. name\u4E3A\u5BA1\u6279\u4EBA\u7684\u59D3\u540D \u73B0\u5728\u9700\u8981\u6839\u636Ename \u6765\u67E5\u627E\u51FA\u6240\u6709\u81EA\u5DF1\u5F85\u5BA1\u6279\u7684\u4EFB\u52A1desc.</p><h2 id="\u601D\u8DEF" tabindex="-1"><a class="header-anchor" href="#\u601D\u8DEF" aria-hidden="true">#</a> \u601D\u8DEF</h2><p>\u5F85\u5BA1\u6279\u7684\u4EFB\u52A1:\u6D41\u7A0B\u524D\u7684\u4EBA\u90FD\u5DF2\u7ECF\u5BA1\u6279\u901A\u8FC7\u6216\u8005\u6D41\u7A0B\u7B2C\u4E00\u4E2A\u4EBA\u5F85\u5BA1\u6279\u7684\u5408\u8BA1. \u6240\u4EE5\u9690\u85CF\u6761\u4EF6\u5C31\u662F,seq-1\u7684\u90A3\u6761\u6570\u636E\u7684\u72B6\u6001\u662F\u5DF2\u901A\u8FC7.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>select a.tid from  task_detail a inner join
(select tid,(seq-1)as seq from task_detail where state = 0 and name = &#39;NameTest&#39;) b
on a.tid = b.tid and a.seq = b.seq
where a.state = 1 
union all 
select tid from task_detail where seq = 1 and state = 0 and name = &#39;NameTest&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div>`,29);function e(t,o){return p}var l=n(a,[["render",e],["__file","Sql.html.vue"]]);export{l as default};
