import{_ as s,c as i,o as a,a3 as h}from"./chunks/framework.COm4hYgr.js";const c=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"doc/ops/SRS.md","filePath":"doc/ops/SRS.md"}'),t={name:"doc/ops/SRS.md"},l=h(`<h2 id="doc" tabindex="-1">doc <a class="header-anchor" href="#doc" aria-label="Permalink to &quot;doc&quot;">​</a></h2><ul><li><a href="https://github.com/ossrs/srs/wiki/v2_CN_SampleFFMPEG" target="_blank" rel="noreferrer">FFMPEG转码部署实例</a></li><li><a href="https://github.com/ossrs/srs/wiki/v2_CN_FFMPEG" target="_blank" rel="noreferrer">Live Streaming Transcode</a></li></ul><h2 id="部署" tabindex="-1">部署 <a class="header-anchor" href="#部署" aria-label="Permalink to &quot;部署&quot;">​</a></h2><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  srs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">srs</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">registry.cn-hangzhou.aliyuncs.com/ossrs/oryx:5</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8080:2022</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2443:2443</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1935:1935</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8000:8000/udp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10080:10080/udp</span></span></code></pre></div><h2 id="ffmpeg转码" tabindex="-1">ffmpeg转码 <a class="header-anchor" href="#ffmpeg转码" aria-label="Permalink to &quot;ffmpeg转码&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -itd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app_ffmpeg1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8067:8080</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/mjl/ffmpeg/:/mnt/app/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --entrypoint=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bash&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jrottenberg/ffmpeg</span></span></code></pre></div><p>转码</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ffmpeg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rtmp://10.13.0.58/live/livestream</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c:v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libx264</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -preset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> veryfast</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -tune</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zerolatency</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b:v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1000k</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -r</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -vf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scale=1280:720</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c:a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aac</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 44100</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> flv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rtmp://10.13.0.58/live/ffdcek?secret=97e315f6bc44468495841a13acd863a5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ffmpeg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rtmp://10.13.0.58/live/ccefca</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c:v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libx264</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -preset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> veryfast</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -tune</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zerolatency</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b:v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1000k</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -r</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -vf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scale=1280:720</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c:a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aac</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 44100</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> flv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rtmp://10.13.0.58/live/fdjefg?secret=017b487efd374e4099e9f31ebd80f67cc</span></span></code></pre></div><p>合并流</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ffmpeg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rtmp://10.13.0.58/live/livestream</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rtmp://10.13.0.58/live/mbbmao</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -filter_complex</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;[0:v:0][1:v:0]hstack=inputs=2[outv]; [0:a:0][1:a:0]amix=inputs=2[outa]&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -map</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;[outv]&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -map</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;[outa]&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> flv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rtmp://10.13.0.58/live/fhgaek?secret=97e315f6bc44468495841a13acd863a5</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ffmpeg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  rtmp://10.13.0.58/live/livestream</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rtmp://10.13.0.58/live/mbbmao</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -filter_complex</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;[1:v]scale=w=500:h=500:force_original_aspect_ratio=decrease[ckout];[0:v][ckout]overlay=x=W-w-10:y=0[out]&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -map</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;[out]&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c:v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libx264</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c:a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aac</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> flv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rtmp://10.13.0.58/live/fhgaek?secret=97e315f6bc44468495841a13acd863a5</span></span></code></pre></div>`,11),n=[l];function p(k,e,F,r,d,g){return a(),i("div",null,n)}const o=s(t,[["render",p]]);export{c as __pageData,o as default};
